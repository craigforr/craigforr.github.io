<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Craig Forrester">
<meta name="description" content="In my previous post in this series, I discussed how to install Azure CLI using Python&rsquo;s package manager, pip, and how to use it to keep it updated. In this post, we&rsquo;ll cover how to set some default configuration.
Verifying Azure CLI Installation To start with, it&rsquo;s a good idea to verify the installation works and check the version installed:
PS&gt; az --version azure-cli (2.0.27) acr (2.0.21) acs (2.0.26) advisor (0.">


<title>


     Azure CLI Basics: Initial Configuration 

</title>
<link rel="canonical" href="https://www.craigforrester.com/posts/azure-cli-basics-initial-configuration/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/color-brewer.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="/css/main.css">
    
        <link rel="stylesheet" href="/css/override.css">
    




<link rel="shortcut icon"

    href="/img/favicon.ico"

>




</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                
                <a href="/"><img class="avatar" src="/img/profile.jpg" srcset="https://www.craigforrester.com/img/profile.jpg 1x"></a>
            
            <a href="/"><div class="name">Craig Forrester</div></a>
            
              <h3 class="self-intro">The Pleasure of Finding Things Out</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-about"><a href="https://www.craigforrester.com/about/"><span>About</span></a></li>
                    
                        <li class="nav-posts"><a href="https://www.craigforrester.com/posts/"><span>Posts</span></a></li>
                    
                        <li class="nav-rss-feed"><a href="https://www.craigforrester.com/index.xml"><span>RSS</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/craigforr" target="_blank" rel="noopener"><img class="icon" src="/img/github.svg" alt="github" /></a>
        

        

        

        
            <a href="//linkedin.com/in/craigforrester" target="_blank" rel="noopener"><img class="icon" src="/img/linkedin.svg" alt="linkedin" /></a>
        

        

        

        

        
            <a href="mailto:cf@craigforrester.com"><img class="icon" src="/img/email.svg" alt="email" /></a>
        

        
            <a href="https://www.craigforrester.com/index.xml"><img class="icon" src="/img/rss.svg" alt="rss" /></a>
        
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Azure CLI Basics: Initial Configuration

</div>

                    <div class="initials"><a href="https://www.craigforrester.com/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='2018-02-22 18:00:00 EST'>February 22, 2018</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>7 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<p>In my <a href="/posts/install-azure-cli-on-windows-10-using-python-pip/" title="Install Azure CLI on Windows 10 using Python pip">previous post</a> in this series, I discussed how to install Azure CLI using Python&rsquo;s package manager, pip, and how to use it to keep it updated. In this post, we&rsquo;ll cover how to set some default configuration.</p>

<h2 id="verifying-azure-cli-installation">Verifying Azure CLI Installation</h2>

<p>To start with, it&rsquo;s a good idea to verify the installation works and check the version installed:</p>

<pre><code class="language-nohighlight">PS&gt; az --version
azure-cli (2.0.27)

acr (2.0.21)
acs (2.0.26)
advisor (0.1.2)
appservice (0.1.26)
backup (1.0.6)
batch (3.1.10)
batchai (0.1.5)
billing (0.1.7)
cdn (0.0.13)
cloud (2.0.12)
cognitiveservices (0.1.10)
command-modules-nspkg (2.0.1)
configure (2.0.14)
consumption (0.2.1)
container (0.1.18)
core (2.0.27)
cosmosdb (0.1.19)
dla (0.0.18)
dls (0.0.19)
eventgrid (0.1.10)
extension (0.0.9)
feedback (2.1.0)
find (0.2.8)
interactive (0.3.16)
iot (0.1.17)
keyvault (2.0.18)
lab (0.0.17)
monitor (0.1.2)
network (2.0.23)
nspkg (3.0.1)
profile (2.0.19)
rdbms (0.0.12)
redis (0.2.11)
reservations (0.1.1)
resource (2.0.23)
role (2.0.19)
servicefabric (0.0.10)
sql (2.0.21)
storage (2.0.25)
vm (2.0.26)

Python location 'C:\Python\python.exe'
Extensions directory 'C:\Users\user\.azure\cliextensions'

Python (Windows) 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:54:40) [MSC v.1900 64 bit (AMD64)]

Legal docs and information: aka.ms/AzureCliLegal
</code></pre>

<p>As you can see, this parameter provides a wealth of information, including what versions of Azure CLI is installed, along with the versions of individual modules that it uses.  Azure CLI 2.0 is written in Python, so each module is a grouping of Python code that pertains to particular Azure feature/component.  So, for example, &ldquo;vm (2.0.26)&rdquo; denotes version 2.0.26 of the module for virtual machines.  Also, note that the location of Python being used is listed, along with the version &mdash; in this case, Python 3.6.4.</p>

<h2 id="adding-azure-cli-to-your-path">Adding Azure CLI to Your PATH</h2>

<p>If you see output from the <code>az --version</code> command, then Azure CLI is installed &mdash; if you followed along with the <a href="/posts/install-azure-cli-on-windows-10-using-python-pip/" title="Install Azure CLI on Windows 10 using Python pip">previous post</a>, then it should. If you see the following, then you either do not have it installed, or it is not on your PATH:</p>

<pre><code class="language-nohighlight">PS&gt; az --version
az : The term 'az' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ az
+ ~~
   + CategoryInfo          : ObjectNotFound: (az:String) [], CommandNotFoundException
        + FullyQualifiedErrorId : CommandNotFoundException
</code></pre>

<p>Your <code>PATH</code> environment variable controls where the operating system looks for commands or scripts to run when your using your shell.  If the <code>az</code> command doesn&rsquo;t work, check your <code>PATH</code> to verify whether or not the Azure CLI installation path is listed:</p>

<pre><code class="language-powershell"># Show directories in PATH
$env:PATH -split ';'
</code></pre>

<p>If the Azure CLI install path is not listed, try opening a new PowerShell window or Command Prompt.  If it still is not listed in your PATH, then you will want to add it to the PATH variable manually.  If you installed Azure CLI with the MSI file, on x64 the default path is <code>C:\Program Files (x86)\Microsoft SDKs\Azure\CLI2\wbin</code> and you can check whether it exists with PowerShell:</p>

<pre><code class="language-powershell">Test-Path -Path 'C:\Program Files (x86)\Microsoft SDKs\Azure\CLI2\wbin'
</code></pre>

<p>If you cannot locate the Azure CLI install, you may want to simply <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" title="Install Azure CLI 2.0">reinstall Azure CLI</a>, as it automatically adds the necessary directories to your PATH.  You can refer to the <a href="/posts/install-azure-cli-on-windows-10-using-python-pip/" title="Install Azure CLI on Windows 10 using Python pip">previous post</a> for additional information and details on how to <a href="http://www.craigforrester.com/posts/install-azure-cli-on-windows-10-using-python-pip/#upgrading-azure-cli-using-pip" title="Upgrading Azure CLI using pip">install and upgrade Azure CLI with pip</a> on Windows 10.</p>

<h2 id="viewing-help">Viewing Help</h2>

<p>To view the help for Azure CLI and list the various commands, type <code>az help</code>:</p>

<pre><code class="language-nohighlight">PS&gt; az help
Group
    az

Subgroups:
    account          : Manage Azure subscription information.
    acr              : Manage Azure Container Registries.
    acs              : Manage Azure Container Services.
    ad               : Manage Azure Active Directory Graph entities needed for Role Based Access
                       Control.
    advisor          : (PREVIEW) Manage Azure Advisor.
    aks              : Manage Azure Kubernetes Services.
    appservice       : Manage App Service plans.
    backup           : Commands to manage Azure Backups.
    batch            : Manage Azure Batch.
    batchai          : Batch AI.
    billing          : Manage Azure Billing.
    cdn              : Manage Azure Content Delivery Networks (CDNs).
    cloud            : Manage registered Azure clouds.
    cognitiveservices: Manage Azure Cognitive Services accounts.
    consumption      : Manage consumption of Azure resources.
    container        : (PREVIEW) Manage Azure Container Instances.
    cosmosdb         : Manage Azure Cosmos DB database accounts.
    disk             : Manage Azure Managed Disks.
    dla              : (PREVIEW) Manage Data Lake Analytics accounts, jobs, and catalogs.
    dls              : (PREVIEW) Manage Data Lake Store accounts and filesystems.
    eventgrid        : Manage Azure Event Grid topics and subscriptions.
    extension        : Manage and update CLI extensions.
    feature          : Manage resource provider features.
    functionapp      : Manage function apps.
    group            : Manage resource groups and template deployments.
    identity         : Managed Service Identities.
    image            : Manage custom virtual machine images.
    iot              : (PREVIEW) Manage Internet of Things (IoT) assets.
    keyvault         : Safeguard and maintain control of keys, secrets, and certificates.
    lab              : Manage Azure DevTest Labs.
    lock             : Manage Azure locks.
    managedapp       : Manage template solutions provided and maintained by Independent Software
                       Vendors (ISVs).
    monitor          : Manage the Azure Monitor Service.
    mysql            : Manage Azure Database for MySQL servers.
    network          : Manage Azure Network resources.
    policy           : Manage resource policies.
    postgres         : Manage Azure Database for PostgreSQL servers.
    provider         : Manage resource providers.
    redis            : Access to a secure, dedicated Redis cache for your Azure applications.
    reservations     : Manage Azure Reservations.
    resource         : Manage Azure resources.
    role             : Manage user roles for access control with Azure Active Directory and service
                       principals.
    sf               : Manage and administer Azure Service Fabric clusters.
    snapshot         : Manage point-in-time copies of managed disks, native blobs, or other
                       snapshots.
    sql              : Manage Azure SQL Databases and Data Warehouses.
    storage          : Manage Azure Cloud Storage resources.
    tag              : Manage resource tags.
    vm               : Provision Linux or Windows virtual machines.
    vmss             : Manage groupings of virtual machines in an Azure Virtual Machine Scale Set
                       (VMSS).
    webapp           : Manage web apps.

Commands:
    configure        : Display and manage the Azure CLI 2.0 configuration. This command is
                       interactive.
    feedback         : Loving or hating the CLI?  Let us know!
    find             : Find Azure CLI commands.
    interactive      : Start interactive mode.
    login            : Log in to Azure.
    logout           : Log out to remove access to Azure subscriptions.
</code></pre>

<p>As you can see, there are a lot commands spanning many Azure features.</p>

<h2 id="initial-configuration">Initial Configuration</h2>

<p>When you first use Azure CLI, it&rsquo;s a good idea to configure some defaults to make the experience for interacive use easier.  Use <code>az configure</code> to kick off the interactive configuration routine.</p>

<p>Here is what it looks like:</p>

<pre><code class="language-nohighlight">PS&gt; az configure

Welcome to the Azure CLI! This command will guide you through logging in and setting some default values.

Your settings can be found at C:\Users\Craig Forrester\.azure\config
Your current configuration is as follows:

[cloud]
name = AzureCloud

Do you wish to change your settings? (y/N): y

What default output format would you like?
 [1] json - JSON formatted output that most closely matches API responses
 [2] jsonc - Colored JSON formatted output that most closely matches API responses
 [3] table - Human-readable output format
 [4] tsv - Tab- and Newline-delimited, great for GREP, AWK, etc.
Please enter a choice [1]: 3

Would you like to enable logging to file? (y/N): n

Microsoft would like to collect anonymous Azure CLI usage data to improve our CLI.  Participation is voluntary and when you choose to participate, your device automatically sends information to Microsoft about how you use Azure CLI.  To update your choice, run &quot;az configure&quot; again.
Select y to enable data collection. (Y/n): n

You're all set! Here are some commands to try:
 $ az login
 $ az vm create --help
 $ az feedback
</code></pre>

<p>For interactive use, I like to set the default output format to <code>table</code>, which will place output in columns.  You can change this whenever you wish, per command line, with the <code>--output</code> parameter, so don&rsquo;t worry about losing functionality.</p>

<h3 id="azure-cli-configuration-file">Azure CLI Configuration File</h3>

<p>The configuration for Azure CLI is located in one of a couple of locations by default. From the <a href="https://docs.microsoft.com/en-us/cli/azure/azure-cli-configuration?view=azure-cli-latest" title="Azure CLI configuration options | Microsoft Docs">documentation</a>:</p>

<blockquote>
<p>&ldquo;The configuration file itself is located at <code>$AZURE_CONFIG_DIR/config</code>. The default value of <code>AZURE_CONFIG_DIR</code> is <code>$HOME/.azure/config</code> on Linux and macOS, and <code>%USERPROFILE%\.azure\config</code> on Windows.&rdquo;</p>
</blockquote>

<p>To view the Azure CLI configuration path in PowerShell on Windows, use <code>$env:USERPROFILE\.azure\config</code>:</p>

<pre><code class="language-nohighlight">PS&gt; cat $env:USERPROFILE\.azure\config
[cloud]
name = AzureCloud

[core]
first_run = yes
output = table
collect_telemetry = no

[logging]
enable_log_file = yes

[defaults]
group =
</code></pre>

<p>These are just a few of the options available, which the initial configuration routine sets.</p>

<h3 id="default-logging-directory">Default Logging Directory</h3>

<p>If you enable logging, you will want to know where it is.  The default log file location is <code>${AZURE_CONFIG_DIR}/logs</code>; on Windows you can view this in your user profile, in the <code>.azure</code> directory:</p>

<pre><code class="language-nohighlight">PS&gt; Test-Path $env:USERPROFILE\.azure\logs\az.log
True
</code></pre>

<p>For complete details on this and other configuration options, take a look at the documentation for <a href="https://docs.microsoft.com/en-us/cli/azure/azure-cli-configuration?view=azure-cli-latest" title="Azure CLI configuration options | Microsoft Docs">Azure CLI configuration options</a>.</p>

<p>In the <a href="/posts/azure-cli-basics-logging-in/" title="Azure CLI Basics: Logging In">next post</a>, I&rsquo;ll talk about how to log in, log out, and switch between subscriptions with Azure CLI.</p>

                <br>
		        <p><a href="/posts/">Back to posts</a></p>
            </div>
            <div class="disqus">
                
            </div>
        </div>
    </div>
</section>



<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-454251-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/powershell.min.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/dos.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>




</body>
</html>

